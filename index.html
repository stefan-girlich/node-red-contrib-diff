<script type="text/javascript">
    RED.nodes.registerType('diff-set', {
        category: 'function',
        color: '#a6bbcf',
        defaults: {
            name: { value: "" },
            emitEmpty: { value: false }
        },
        inputs: 1,
        outputs: 1,
        icon: 'function.png',
        label: () => {
            return this.name || 'diff-set'
        }
    });
</script>

<script type="text/x-red" data-template-name="diff-set">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>

    <div class="form-row">
        <label for="node-input-emitEmpty"><i class="icon-wrench"></i> Emit empty diffs?</label>
        <input type="checkbox" id="node-input-emitEmpty">
    </div>
</script>

<script type="text/x-red" data-help-name="diff-set">
    <p>
        A node which detects and filters changes between sets provided as message payloads.
        The set represented by the message payload is compared to the last message payload 
        previously sent to the node instance.
    </p>

    <p>
        <ul>
            <li>Sets of values of any type needs to be provided as an array. Any other data type 
                will be ignored and result in an empty emission.</li>
            <li>The given data is interpreted as <i>sets</i>, meaning that differences in order are ignored.</li>
            <li>Changes in sets of values are depicted as <i>additions</i> and <i>deletions</i>:<br/>
                <code>
                console.log(msg.diff)
                // {
                    add: [1, 2],
                    del: [3, 4]
                }
                </code>
            </li>
        </ul>
    </p>
</script>